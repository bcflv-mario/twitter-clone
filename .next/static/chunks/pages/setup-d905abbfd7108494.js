(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{2654:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return l}});var r=t(29),u=t(7794),a=t.n(u),o=t(7294),s=t(1163),c=t(3299),i=t(5893);function l(){var n=(0,s.useRouter)(),e=(0,c.useSession)(),t=e.data,u="loading"===e.status,l=(0,o.useState)(""),f=l[0],d=l[1],p=(0,o.useState)(!1),m=p[0],h=p[1];return t&&t.user?u?null:(u||!t.user.name||m||n.push("/home"),(0,i.jsxs)("form",{className:"mt-10 ml-20",onSubmit:function(){var e=(0,r.Z)(a().mark((function e(r){var u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,fetch("/api/setup",{body:JSON.stringify({name:f}),headers:{"Content-Type":"application/json"},method:"POST"});case 3:u=e.sent,t.user.name=f,u.ok&&(h(!1),n.push("/home")),h(!0);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,i.jsxs)("div",{className:"flex-1 mb-5",children:[(0,i.jsx)("div",{className:"flex-1 mb-5",children:"Username"}),(0,i.jsx)("input",{type:"text",name:"name",value:f,onChange:function(n){return d(n.target.value)},className:"border p-1"}),m&&(0,i.jsx)("p",{children:"User name already taken, try again"})]}),(0,i.jsx)("button",{className:"border px-8 py-2 mt-0 mr-8 font-bold rounded-full color-accent-contrast bg-color-accent hover:bg-color-accent-hover",children:"Save"})]})):null}},4488:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setup",function(){return t(2654)}])},1163:function(n,e,t){n.exports=t(1587)},29:function(n,e,t){"use strict";function r(n,e,t,r,u,a,o){try{var s=n[a](o),c=s.value}catch(i){return void t(i)}s.done?e(c):Promise.resolve(c).then(r,u)}function u(n){return function(){var e=this,t=arguments;return new Promise((function(u,a){var o=n.apply(e,t);function s(n){r(o,u,a,s,c,"next",n)}function c(n){r(o,u,a,s,c,"throw",n)}s(void 0)}))}}t.d(e,{Z:function(){return u}})}},function(n){n.O(0,[774,888,179],(function(){return e=4488,n(n.s=e);var e}));var e=n.O();_N_E=e}]);