(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{6534:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(5675),a=n.n(r),s=n(1664),o=n.n(s),c=n(9252),i=n(1795);c.Z.addLocale(i.Z);var l=new c.Z("en-US"),u=n(5893);function d(e){var t=e.tweet,n=e.nolink;return(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("div",{className:"flex flex-shrink-0 p-4 pb-0",children:(0,u.jsx)("div",{className:"flex-shrink-0 block group",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{children:t.author.image&&(0,u.jsx)(a(),{className:"rounded-full",src:t.author.image,alt:"",width:"40",height:"40"})}),(0,u.jsx)("div",{className:"ml-3 -mt-6",children:(0,u.jsxs)("p",{className:"",children:[(0,u.jsx)(o(),{href:"/".concat(t.author.name),children:(0,u.jsx)("a",{children:(0,u.jsx)("span",{className:"text-base font-medium leading-6 color-primary hover:underline",children:t.author.name})})}),(0,u.jsx)("span",{className:"pl-1 text-sm font-light leading-5 color-dimmed",children:n?(0,u.jsx)("span",{children:l.format(new Date(t.createdAt),"twitter")}):(0,u.jsx)(o(),{href:"/".concat(t.author.name,"/status/").concat(t.id),children:(0,u.jsx)("a",{className:"hover:underline",children:l.format(new Date(t.createdAt),"twitter")})})})]})})]})})}),(0,u.jsx)("div",{className:"pl-16 -mt-6",children:(0,u.jsx)("p",{className:"flex-shrink pl-1 pr-2 text-base font-normal color-primary width-auto",children:t.content})})]})}},8392:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(6534),a=n(5893);function s(e){var t=e.tweets,n=e.nolink;return t?(0,a.jsx)(a.Fragment,{children:t.map((function(e,t){return(0,a.jsx)(r.Z,{tweet:e,nolink:n},t)}))}):(0,a.jsx)("p",{children:"No Tweet"})}},3502:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return p},default:function(){return x}});var r=n(3299),a=n(1163),s=n(7294);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=n(29),l=n(7794),u=n.n(l),d=n(5893);function f(e){var t=e.tweets,n=e.setTweets,o=(0,s.useState)(""),l=o[0],f=o[1],m=(0,r.useSession)().data;(0,a.useRouter)();return m&&m.user?(0,d.jsxs)("form",{onSubmit:function(){var e=(0,i.Z)(u().mark((function e(r){var a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),l){e.next=4;break}return alert("No content"),e.abrupt("return");case 4:return e.next=6,fetch("/api/tweet",{body:JSON.stringify({content:l}),headers:{"Content-Type":"application/json"},method:"POST"});case 6:return a=e.sent,e.next=9,a.json();case 9:s=e.sent,n([s].concat(c(t))),f("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,d.jsx)("div",{className:"flex",children:(0,d.jsx)("div",{className:"flex-1 px-1 pt-2 mt-2 mr-1 ml-1",children:(0,d.jsx)("textarea",{className:"border p-4 w-full text-lg font-medium bg-transparent outline-none color-primary ",rows:2,cols:50,placeholder:"What's happening?",name:"content",value:l,onChange:function(e){return f(e.target.value)}})})}),(0,d.jsx)("div",{className:"flex",children:(0,d.jsx)("div",{className:"flex-1 mb-5",children:(0,d.jsx)("button",{className:"border float-right px-8 py-2 mt-0 mr-2 font-bold rounded-full",children:"Tweet"})})})]}):null}var m=n(8392);function h(e){var t=e.tweets,n=e.setTweets;return(0,d.jsx)("div",{className:"mt-10 flex justify-center",children:(0,d.jsx)("button",{className:" justify-self-center border px-8 py-2 mt-0 mr-2 font-bold rounded-full color-accent-contrast bg-color-accent hover:bg-color-accent-hover ",onClick:(0,i.Z)(u().mark((function e(){var r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[t.length-1].id,e.next=3,fetch("/api/tweets?take=2&cursor=".concat(r));case 3:return a=e.sent,e.next=6,a.json();case 6:s=e.sent,n([].concat(c(t),c(s)));case 8:case"end":return e.stop()}}),e)}))),children:"Load more"})})}var p=!0;function x(e){var t=e.initialTweets,n=(0,s.useState)(t),o=n[0],c=n[1],i=(0,r.useSession)(),l=i.data,u="loading"===i.status,p=(0,a.useRouter)();return u?(console.log("Still loading home"),null):(l||p.push("/"),l&&!l.user.name&&p.push("/setup"),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f,{tweets:o,setTweets:c}),(0,d.jsx)(m.Z,{tweets:o}),(0,d.jsx)(h,{tweets:o,setTweets:c})]}))}},5732:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(3502)}])},1163:function(e,t,n){e.exports=n(1587)},29:function(e,t,n){"use strict";function r(e,t,n,r,a,s,o){try{var c=e[s](o),i=c.value}catch(l){return void n(l)}c.done?t(i):Promise.resolve(i).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var o=e.apply(t,n);function c(e){r(o,a,s,c,i,"next",e)}function i(e){r(o,a,s,c,i,"throw",e)}c(void 0)}))}}n.d(t,{Z:function(){return a}})}},function(e){e.O(0,[531,774,888,179],(function(){return t=5732,e(e.s=t);var t}));var t=e.O();_N_E=t}]);